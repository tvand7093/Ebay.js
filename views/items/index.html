

<div class='row'>
  <div class='col-md-12'>
    <div class='panel'>
      <div class='col-md-12'>
	<div class='col-md-2'>
	  <label class='label'>Search</label> 
	</div>
	<div class='col-md-4'>
	  <input id='name' name='Name' placeholder='search'/>
	</div>
	<div class='col-md-4'>
	  <select id='category'>
	    {{#categories}}
	    <option value='{{Category}}'>{{Category}}</option>
	    {{/categories}}
	  </select>
	</div>
	<div class='col-md-2'>
	  <button id='search' class='btn btn-default'>Search</button>
	</div>
      </div>
    </div>
  </div>
</div>
<div class='row'>
  <div class='col-md-12'>
    <h4 class='title'>Results</h4>
    <table class='table table-bordered'>
      <thead>
	<tr>
	  <td>Item Name</td>
	  <td>Category</td>
	  <td>Current Bid</td>
	  <td>Last Bid Time</td>
	  <td>Time Remaining</td>
	  <td></td>
	</tr>
      </thead>
      <tbody>
	{{#results}}
	<tr data-id="{{Id}}">
	  <td>{{Name}}</td>
	  <td>{{Category}}</td>
	  <td>{{Amount}}</td>
	  <td>{{TimeStamp}}</td>
	  <td>{{TimeRemaining}}</td>
	  <td><a href='/bids/edit/{{Id}}'>View Item</a></td>
	</tr>
	{{/results}}
      </tbody>
    </table>

  </div>
</div>

<script>
  $(function() {
      $("#search").click(function() {
	  var name = $('#name').val();
	  var category = $('#category').val();

	  if(!name && !category) return;

	  $.get("/items/search?name=" + name + "&category=" + category, function(results){
	      $("tbody").children('tr').remove();

	      results.forEach(function(item) {
		  $('tbody').append(`<tr> \
				    <td>${item.Name}</td> \
				    <td>${item.Category}</td>\
				    <td>${item.Amount}</td>\
				    <td>${item.TimeStamp}</td>\
				    <td>${item.TimeRemaining}</td>\
				    <td></td>
				    </tr>`);
	      });
	  });
      });
  });
</script>
